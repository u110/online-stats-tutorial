# 学習トピック

オンライン統計の各トピックについて解説しています。

## 基礎

### 1. [オンライン平均（Online Mean）](./01-online-mean.md)
データを1つずつ処理しながら平均を更新する手法。

```
新しい平均 = 古い平均 + (新しい値 - 古い平均) / カウント
```

### 2. [オンライン分散（Welford's Algorithm）](./02-online-variance.md)
数値的に安定した方法で分散・標準偏差を計算する手法。

### 3. [オンラインヒストグラム](./03-online-histogram.md)
固定幅または適応型のビンを使用して、データ分布を近似する手法。

### 4. [四分位数・パーセンタイル推定](./04-quantile-estimation.md) ⭐
オンラインでの四分位数計算は**厳密解ではなく推定値**になります。主なアルゴリズム：

- **P² アルゴリズム**: 5つのマーカーを使用してパーセンタイルを推定
- **t-digest**: 圧縮されたヒストグラムを使用した高精度な推定
- **GK アルゴリズム（Greenwald-Khanna）**: ε-近似を保証する手法

> **なぜ推定値になるのか？**
>
> 正確な四分位数を計算するには、すべてのデータをソートする必要があります。
> しかし、ストリーミング環境ではすべてのデータを保持できないため、
> 限られたメモリで「十分に正確な」値を推定する必要があります。

### 5. [統計値のマージ（Mergeable Statistics）](./05-merging-statistics.md) ⭐
分散システムでは、各ノードで計算した統計を**マージ**して全体の統計を得る必要があります。

| 統計量 | マージ可能性 | 備考 |
|--------|------------|------|
| カウント | ✅ 容易 | 単純に足し合わせ |
| 合計 | ✅ 容易 | 単純に足し合わせ |
| 平均 | ✅ 可能 | 加重平均として計算 |
| 分散 | ✅ 可能 | 並列アルゴリズムが必要 |
| 最小/最大 | ✅ 容易 | min/maxを取る |
| 中央値 | ⚠️ 近似 | t-digestなどが必要 |
| ヒストグラム | ✅ 可能 | ビンごとにマージ |

### 6. [指数移動平均（Exponential Moving Average）](./06-ema.md)
最新のデータにより大きな重みを与える移動平均。

## 発展

### 7. [Count-Min Sketch](./07-count-min-sketch.md)
確率的データ構造を使用した頻度推定。

### 8. [HyperLogLog](./08-hyperloglog.md)
確率的データ構造を使用したカーディナリティ（ユニーク要素数）推定。

### 9. [HyperLogLog++](./09-hyperloglog-pp.md)
Googleによる2013年のHyperLogLog改良版。64ビットハッシュ対応、スパース表現による省メモリ化。
